{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ikram/Desktop/clinical/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\r\n\r\ndeclare global {\r\n  var prisma: PrismaClient | undefined;\r\n}\r\n\r\nexport const prisma =\r\n  global.prisma ??\r\n  new PrismaClient();\r\n\r\nif (process.env.NODE_ENV !== \"production\") global.prisma = prisma;\r\n"],"names":[],"mappings":";;;;AAAA;;AAMO,MAAM,SACX,OAAO,MAAM,IACb,IAAI,6IAAY;AAElB,wCAA2C,OAAO,MAAM,GAAG"}},
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ikram/Desktop/clinical/src/pages/api/appointments/%5Bid%5D.ts"],"sourcesContent":["import type { NextApiRequest, NextApiResponse } from \"next\";\r\nimport { prisma } from \"../../../lib/prisma\";\r\n\r\nexport default async function handler(req: NextApiRequest, res: NextApiResponse) {\r\n  const appointmentId = Number(req.query.id);\r\n\r\n  if (req.method !== \"PATCH\") {\r\n    return res.status(405).json({ error: \"Method not allowed\" });\r\n  }\r\n\r\n  try {\r\n    const { status } = req.body;\r\n\r\n    // Vérification stricte selon ton enum Prisma\r\n    const allowedStatuses = [\"SCHEDULED\", \"CANCELLED\", \"DONE\"];\r\n    if (!allowedStatuses.includes(status)) {\r\n      return res.status(400).json({\r\n        error: `Status invalide. Valeurs acceptées : ${allowedStatuses.join(\", \")}`,\r\n      });\r\n    }\r\n\r\n    const updated = await prisma.appointment.update({\r\n      where: { id: appointmentId },\r\n      data: { status },\r\n      include: {\r\n        patient: true,\r\n        doctor: true,\r\n      },\r\n    });\r\n\r\n    return res.status(200).json(updated);\r\n\r\n  } catch (error) {\r\n    console.error(\"Erreur update appointment:\", error);\r\n    return res.status(500).json({ error: \"Erreur interne\" });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AACA;;AAEe,eAAe,QAAQ,GAAmB,EAAE,GAAoB;IAC7E,MAAM,gBAAgB,OAAO,IAAI,KAAK,CAAC,EAAE;IAEzC,IAAI,IAAI,MAAM,KAAK,SAAS;QAC1B,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAqB;IAC5D;IAEA,IAAI;QACF,MAAM,EAAE,MAAM,EAAE,GAAG,IAAI,IAAI;QAE3B,6CAA6C;QAC7C,MAAM,kBAAkB;YAAC;YAAa;YAAa;SAAO;QAC1D,IAAI,CAAC,gBAAgB,QAAQ,CAAC,SAAS;YACrC,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;gBAC1B,OAAO,CAAC,qCAAqC,EAAE,gBAAgB,IAAI,CAAC,OAAO;YAC7E;QACF;QAEA,MAAM,UAAU,MAAM,uHAAM,CAAC,WAAW,CAAC,MAAM,CAAC;YAC9C,OAAO;gBAAE,IAAI;YAAc;YAC3B,MAAM;gBAAE;YAAO;YACf,SAAS;gBACP,SAAS;gBACT,QAAQ;YACV;QACF;QAEA,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;IAE9B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC;YAAE,OAAO;QAAiB;IACxD;AACF"}}]
}