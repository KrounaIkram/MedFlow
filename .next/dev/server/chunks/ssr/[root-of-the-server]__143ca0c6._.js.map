{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ikram/Desktop/clinical/src/pages/patient.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\n\r\ninterface Doctor {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n}\r\n\r\nexport default function PatientPage() {\r\n  const [doctors, setDoctors] = useState<Doctor[]>([]);\r\n  const [selectedDoctorId, setSelectedDoctorId] = useState(\"\");\r\n  const [patientName, setPatientName] = useState(\"\");\r\n  const [appointmentDate, setAppointmentDate] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n\r\n  // Fetch des docteurs\r\n  useEffect(() => {\r\n    const fetchDoctors = async () => {\r\n      try {\r\n        const res = await fetch(\"/api/users/DOCTOR\");\r\n        if (!res.ok) throw new Error(\"Erreur chargement docteurs\");\r\n        const data = await res.json();\r\n        setDoctors(data);\r\n      } catch (err: any) {\r\n        console.error(err);\r\n        setError(err.message || \"Erreur inconnue\");\r\n      }\r\n    };\r\n    fetchDoctors();\r\n  }, []);\r\n\r\n  // Création rendez-vous\r\n  const handleCreateAppointment = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n\r\n    if (!patientName) return setError(\"Nom du patient requis\");\r\n    if (!selectedDoctorId) return setError(\"Docteur requis\");\r\n    if (!appointmentDate) return setError(\"Date requise\");\r\n\r\n    try {\r\n      const res = await fetch(\"/api/appointments\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          patientName,\r\n          doctorId: selectedDoctorId,\r\n          date: appointmentDate,\r\n        }),\r\n      });\r\n\r\n      const data = await res.json();\r\n      if (!res.ok) throw data;\r\n\r\n      alert(\"Rendez-vous créé !\");\r\n      // reset form\r\n      setPatientName(\"\");\r\n      setSelectedDoctorId(\"\");\r\n      setAppointmentDate(\"\");\r\n    } catch (err: any) {\r\n      console.error(\"Erreur backend:\", err);\r\n      setError(err.error || \"Erreur lors de la création du rendez-vous\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Prendre un rendez-vous</h1>\r\n\r\n      {error && <p className=\"text-red-500 mb-4\">{error}</p>}\r\n\r\n      <form onSubmit={handleCreateAppointment} className=\"space-y-4\">\r\n        <div>\r\n          <label className=\"block mb-1 font-medium\">Nom du patient</label>\r\n          <input\r\n            type=\"text\"\r\n            value={patientName}\r\n            onChange={(e) => setPatientName(e.target.value)}\r\n            className=\"border p-2 w-full\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block mb-1 font-medium\">Choisir un docteur</label>\r\n          <select\r\n            value={selectedDoctorId}\r\n            onChange={(e) => setSelectedDoctorId(e.target.value)}\r\n            className=\"border p-2 w-full\"\r\n            required\r\n          >\r\n            <option value=\"\">-- Sélectionner un docteur --</option>\r\n            {doctors.map((doc) => (\r\n              <option key={doc.id} value={doc.id}>\r\n                {doc.name} ({doc.email})\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div>\r\n          <label className=\"block mb-1 font-medium\">Date du rendez-vous</label>\r\n          <input\r\n            type=\"datetime-local\"\r\n            value={appointmentDate}\r\n            onChange={(e) => setAppointmentDate(e.target.value)}\r\n            className=\"border p-2 w-full\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          className=\"bg-blue-500 text-white px-4 py-2 rounded\"\r\n        >\r\n          Créer rendez-vous\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUe,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAW,EAAE;IACnD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,+GAAQ,EAAC;IACzD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,+GAAQ,EAAC;IAC/C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,+GAAQ,EAAC;IACvD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC;IAEnC,qBAAqB;IACrB,IAAA,gHAAS,EAAC;QACR,MAAM,eAAe;YACnB,IAAI;gBACF,MAAM,MAAM,MAAM,MAAM;gBACxB,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;gBAC7B,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,WAAW;YACb,EAAE,OAAO,KAAU;gBACjB,QAAQ,KAAK,CAAC;gBACd,SAAS,IAAI,OAAO,IAAI;YAC1B;QACF;QACA;IACF,GAAG,EAAE;IAEL,uBAAuB;IACvB,MAAM,0BAA0B,OAAO;QACrC,EAAE,cAAc;QAChB,SAAS;QAET,IAAI,CAAC,aAAa,OAAO,SAAS;QAClC,IAAI,CAAC,kBAAkB,OAAO,SAAS;QACvC,IAAI,CAAC,iBAAiB,OAAO,SAAS;QAEtC,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,qBAAqB;gBAC3C,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB;oBACA,UAAU;oBACV,MAAM;gBACR;YACF;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM;YAEnB,MAAM;YACN,aAAa;YACb,eAAe;YACf,oBAAoB;YACpB,mBAAmB;QACrB,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,mBAAmB;YACjC,SAAS,IAAI,KAAK,IAAI;QACxB;IACF;IAEA,qBACE,qKAAC;QAAI,WAAU;;0BACb,qKAAC;gBAAG,WAAU;0BAA0B;;;;;;YAEvC,uBAAS,qKAAC;gBAAE,WAAU;0BAAqB;;;;;;0BAE5C,qKAAC;gBAAK,UAAU;gBAAyB,WAAU;;kCACjD,qKAAC;;0CACC,qKAAC;gCAAM,WAAU;0CAAyB;;;;;;0CAC1C,qKAAC;gCACC,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gCAC9C,WAAU;gCACV,QAAQ;;;;;;;;;;;;kCAIZ,qKAAC;;0CACC,qKAAC;gCAAM,WAAU;0CAAyB;;;;;;0CAC1C,qKAAC;gCACC,OAAO;gCACP,UAAU,CAAC,IAAM,oBAAoB,EAAE,MAAM,CAAC,KAAK;gCACnD,WAAU;gCACV,QAAQ;;kDAER,qKAAC;wCAAO,OAAM;kDAAG;;;;;;oCAChB,QAAQ,GAAG,CAAC,CAAC,oBACZ,qKAAC;4CAAoB,OAAO,IAAI,EAAE;;gDAC/B,IAAI,IAAI;gDAAC;gDAAG,IAAI,KAAK;gDAAC;;2CADZ,IAAI,EAAE;;;;;;;;;;;;;;;;;kCAOzB,qKAAC;;0CACC,qKAAC;gCAAM,WAAU;0CAAyB;;;;;;0CAC1C,qKAAC;gCACC,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,mBAAmB,EAAE,MAAM,CAAC,KAAK;gCAClD,WAAU;gCACV,QAAQ;;;;;;;;;;;;kCAIZ,qKAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAMT"}}]
}