{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ikram/Desktop/clinical/src/pages/admin/dashboard.tsx"],"sourcesContent":["// pages/admin/index.tsx\r\n\"use client\";\r\n\r\nimport { useSession } from \"next-auth/react\";\r\nimport { useRouter } from \"next/router\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { toast } from \"react-hot-toast\"; // ‚≠ê IMPORTANT : ajout√© pour corriger l'erreur\r\n\r\nexport default function AdminDashboard() {\r\n  const { data: session, status } = useSession();\r\n  const router = useRouter();\r\n  const [activeTab, setActiveTab] = useState<\"clinic\" | \"services\" | \"staff\">(\"clinic\");\r\n\r\n  useEffect(() => {\r\n    if (status === \"loading\") return;\r\n    if (!session || session.user.role !== \"ADMIN\") {\r\n      router.push(\"/login\");\r\n    }\r\n  }, [session, status, router]);\r\n\r\n  if (status === \"loading\") return <p>Chargement...</p>;\r\n  if (!session || session.user.role !== \"ADMIN\") return null;\r\n\r\n  return (\r\n    <div className=\"p-6 max-w-6xl mx-auto\">\r\n      <h1 className=\"text-3xl font-bold mb-6\">Administration ‚Äì Propri√©taire</h1>\r\n\r\n      <div className=\"flex space-x-4 mb-6 border-b\">\r\n        <button\r\n          className={`pb-2 px-4 ${activeTab === \"clinic\" ? \"border-b-2 border-blue-600 font-bold\" : \"\"}`}\r\n          onClick={() => setActiveTab(\"clinic\")}\r\n        >\r\n          üè• Clinique\r\n        </button>\r\n\r\n        <button\r\n          className={`pb-2 px-4 ${activeTab === \"services\" ? \"border-b-2 border-blue-600 font-bold\" : \"\"}`}\r\n          onClick={() => setActiveTab(\"services\")}\r\n        >\r\n          üí∏ Services\r\n        </button>\r\n\r\n        <button\r\n          className={`pb-2 px-4 ${activeTab === \"staff\" ? \"border-b-2 border-blue-600 font-bold\" : \"\"}`}\r\n          onClick={() => setActiveTab(\"staff\")}\r\n        >\r\n          üë• Staff\r\n        </button>\r\n      </div>\r\n\r\n      {activeTab === \"clinic\" && <ClinicSettings />}\r\n      {activeTab === \"services\" && <ServicesManager />}\r\n      {activeTab === \"staff\" && <StaffManager />}\r\n    </div>\r\n  );\r\n}\r\n\r\n/* ------------------------------------------------------------------\r\n   üîΩüîΩüîΩ COMPOSANTS\r\n--------------------------------------------------------------------*/\r\n\r\n// üè• Param√®tres de la clinique\r\nfunction ClinicSettings() {\r\n  const [clinic, setClinic] = useState({\r\n    name: \"\",\r\n    address: \"\",\r\n    phone: \"\",\r\n    email: \"\",\r\n    logo: \"\",\r\n  });\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    try {\r\n      const res = await fetch(\"/api/admin/clinic\", {\r\n        method: \"PUT\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(clinic),\r\n      });\r\n\r\n      if (res.ok) {\r\n        toast.success(\"Clinique mise √† jour !\");\r\n      } else {\r\n        const err = await res.json();\r\n        toast.error(err.error || \"Erreur lors de la mise √† jour\");\r\n      }\r\n    } catch {\r\n      toast.error(\"Erreur r√©seau\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 border rounded\">\r\n      <h2 className=\"text-xl font-semibold mb-4\">Param√®tres de la clinique</h2>\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <div>\r\n          <label className=\"block\">Nom de la clinique</label>\r\n          <input\r\n            type=\"text\"\r\n            value={clinic.name}\r\n            onChange={(e) => setClinic({ ...clinic, name: e.target.value })}\r\n            required\r\n            className=\"w-full p-2 border rounded\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label className=\"block\">Adresse</label>\r\n          <input\r\n            type=\"text\"\r\n            value={clinic.address}\r\n            onChange={(e) => setClinic({ ...clinic, address: e.target.value })}\r\n            className=\"w-full p-2 border rounded\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label className=\"block\">T√©l√©phone</label>\r\n          <input\r\n            type=\"tel\"\r\n            value={clinic.phone}\r\n            onChange={(e) => setClinic({ ...clinic, phone: e.target.value })}\r\n            className=\"w-full p-2 border rounded\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label className=\"block\">Email</label>\r\n          <input\r\n            type=\"email\"\r\n            value={clinic.email}\r\n            onChange={(e) => setClinic({ ...clinic, email: e.target.value })}\r\n            className=\"w-full p-2 border rounded\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label className=\"block\">Logo (URL)</label>\r\n          <input\r\n            type=\"url\"\r\n            value={clinic.logo}\r\n            onChange={(e) => setClinic({ ...clinic, logo: e.target.value })}\r\n            className=\"w-full p-2 border rounded\"\r\n          />\r\n        </div>\r\n        <button type=\"submit\" className=\"bg-blue-600 text-white py-2 px-4 rounded\">\r\n          Enregistrer\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\n// üí∏ Gestion des services\r\nfunction ServicesManager() {\r\n  return (\r\n    <div className=\"p-4 bg-white rounded shadow\">\r\n      <h2 className=\"text-xl font-bold mb-4\">Gestion des Services</h2>\r\n      <p>Ici, tu afficheras les services, prix, modification, suppression...</p>\r\n    </div>\r\n  );\r\n}\r\n\r\n// üë• Gestion du staff\r\nfunction StaffManager() {\r\n  return (\r\n    <div className=\"p-4 bg-white rounded shadow\">\r\n      <h2 className=\"text-xl font-bold mb-4\">Gestion du Staff</h2>\r\n      <p>Ici, tu listeras les m√©decins, r√©ceptionnistes, etc.</p>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}