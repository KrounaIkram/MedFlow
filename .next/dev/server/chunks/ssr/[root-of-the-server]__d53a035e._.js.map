{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/ikram/Desktop/clinical/src/pages/register.tsx"],"sourcesContent":["\r\n\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { toast } from \"sonner\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nexport default function RegisterPage() {\r\n  const router = useRouter();\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const onSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n\r\n    const fd = new FormData(e.currentTarget);\r\n    const payload = {\r\n      name: fd.get(\"name\") as string,\r\n      email: fd.get(\"email\") as string,\r\n      password: fd.get(\"password\") as string,\r\n      role: (fd.get(\"role\") as string) || \"PATIENT\",\r\n    };\r\n\r\n    try {\r\n      const res = await fetch(\"http://localhost:3000/api/auth/register\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(payload),\r\n      });\r\n\r\n      const result = await res.json();\r\n\r\n      if (res.ok) {\r\n        toast.success(\"Compte créé avec succès !\");\r\n        setTimeout(() => router.push(\"/login\"), 1500);\r\n      } else {\r\n        toast.error(result.error ?? \"Erreur lors de l'inscription\");\r\n      }\r\n    } catch {\r\n      toast.error(\"Erreur de connexion au serveur\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-[#eaf7ff] min-h-screen flex flex-col items-center justify-center px-4\">\r\n      {/* Navbar */}\r\n      <nav className=\"fixed top-0 left-0 w-full h-[80px] bg-[#eaf7ff] flex items-center justify-between px-6 md:px-10 shadow-md z-50\">\r\n        <div className=\"text-2xl md:text-3xl font-bold text-blue-600\">DiagnoTech</div>\r\n        <ul className=\"hidden md:flex gap-6 text-lg text-gray-700\">\r\n          <li><a href=\"/home\" className=\"hover:text-blue-600\">HOME</a></li>\r\n          <li><a href=\"/about-us\" className=\"hover:text-blue-600\">ABOUT</a></li>\r\n          <li><a href=\"#\" className=\"hover:text-blue-600\">SERVICES</a></li>\r\n          <li><a href=\"#\" className=\"hover:text-blue-600\">FAQs</a></li>\r\n          <li><a href=\"/contact\" className=\"hover:text-blue-600\">CONTACT</a></li>\r\n        </ul>\r\n        <div className=\"hidden md:flex items-center gap-3 text-lg\">\r\n          <a href=\"/login\" className=\"text-gray-700 hover:text-blue-600\">Login</a>\r\n          <a href=\"/register\" className=\"bg-[#4BB2FC] text-white px-4 py-2 rounded hover:bg-blue-500\">Sign Up</a>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Main content */}\r\n      <div className=\"flex flex-col md:flex-row items-center justify-center w-full max-w-6xl mt-20 gap-8\">\r\n        {/* Left image */}\r\n        <div className=\"w-full md:w-5/12 flex justify-center\">\r\n          <img src=\"/doctors.png\" alt=\"Doctors\" className=\"w-full max-w-[450px] object-contain\" />\r\n        </div>\r\n\r\n        {/* Right form */}\r\n        <div className=\"w-full md:w-7/12 flex justify-center\">\r\n          <div className=\"bg-white p-8 md:p-12 rounded-xl shadow-xl border w-full max-w-[480px]\">\r\n            <form onSubmit={onSubmit} className=\"space-y-6\">\r\n              {/* Username */}\r\n              <div>\r\n                <label className=\"block text-base font-normal text-blue-500 mb-1\">Username</label>\r\n                <input \r\n                  type=\"text\"\r\n                  name=\"name\"\r\n                  required\r\n                  className=\"w-full border border-gray-300 rounded-md py-3 px-4 focus:outline-none focus:ring-1 focus:ring-blue-500 text-gray-700\" \r\n                />\r\n              </div>\r\n\r\n              {/* Email */}\r\n              <div>\r\n                <label className=\"block text-base font-normal text-blue-500 mb-1\">Email</label>\r\n                <input \r\n                  type=\"email\"\r\n                  name=\"email\"\r\n                  required\r\n                  className=\"w-full border border-gray-300 rounded-md py-3 px-4 focus:outline-none focus:ring-1 focus:ring-blue-500 text-gray-700\" \r\n                />\r\n              </div>\r\n\r\n              {/* Password */}\r\n              <div>\r\n                <label className=\"block text-base font-normal text-blue-500 mb-1\">Password</label>\r\n                <input \r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  required\r\n                  minLength={6}\r\n                  className=\"w-full border border-gray-300 rounded-md py-3 px-4 focus:outline-none focus:ring-1 focus:ring-blue-500 text-gray-700\" \r\n                />\r\n              </div>\r\n\r\n              {/* Role */}\r\n              <div>\r\n                <label className=\"block text-base font-normal text-blue-500 mb-1\">Role</label>\r\n                <select\r\n                  name=\"role\"\r\n                  defaultValue=\"PATIENT\"\r\n                  className=\"w-full border border-gray-300 rounded-md py-3 px-4 focus:outline-none focus:ring-1 focus:ring-blue-500 text-gray-700\"\r\n                >\r\n                  <option value=\"ADMIN\">ADMIN</option>\r\n                  <option value=\"DOCTOR\">DOCTOR</option>\r\n                  <option value=\"RECEPTIONIST\">RECEPTIONIST</option>\r\n                  <option value=\"PATIENT\">PATIENT</option>\r\n                </select>\r\n              </div>\r\n\r\n              {/* Register button */}\r\n              <button \r\n                type=\"submit\"\r\n                disabled={isLoading}\r\n                className=\"w-full bg-blue-500 hover:bg-blue-600 text-white text-lg py-3 rounded-md transition font-medium mt-6\"\r\n              >\r\n                {isLoading ? \"Création...\" : \"Register\"}\r\n              </button>\r\n\r\n              {/* Login link */}\r\n              <p className=\"text-center text-gray-600 text-base mt-4\">\r\n                Already have an account? <a href=\"/login\" className=\"font-semibold text-blue-600 hover:underline\">Login</a>\r\n              </p>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}